<div
  class="rounded-lg border p-4 transition-opacity"
  [class.opacity-50]="!source().isActive"
  [style.border-left]="'4px solid ' + getCategoryColor()"
>
  <!-- Row 1: Name + Toggle switch -->
  <div class="flex items-center justify-between mb-1">
    <div class="flex items-center gap-2">
      <span
        class="w-2 h-2 rounded-full flex-shrink-0"
        [class.bg-emerald-500]="source().isActive"
        [class.bg-gray-300]="!source().isActive"
      ></span>
      <h3 class="font-semibold text-sm text-gray-800">
        {{ source().name }}
      </h3>
    </div>

    <!-- Toggle on/off -->
    <button
      type="button"
      class="relative inline-flex h-5 w-9 items-center rounded-full transition-colors"
      [class.bg-teal-600]="source().isActive"
      [class.bg-gray-300]="!source().isActive"
      [attr.aria-checked]="source().isActive"
      [attr.aria-label]="source().isActive ? 'Disable ' + source().name : 'Enable ' + source().name"
      role="switch"
      (click)="toogle.emit(source()); $event.stopPropagation()"
    >
      <span
        class="inline-block h-3.5 w-3.5 rounded-full bg-white shadow transform transition-transform"
        [class.translate-x-4]="source().isActive"
        [class.translate-x-0.5]="!source().isActive"
      ></span>
    </button>
  </div>

  <!-- Row 2: URL -->
  <p class="text-xs text-gray-400 truncate ml-4 mb-1">
    {{ source().url }}
  </p>

  <!-- Row 3: Category badge + description -->
  <div class="flex items-center gap-2 ml-4 mb-2">
    <span
      class="inline-block px-2 py-0.5 rounded-full text-xs font-medium"
      [style.background-color]="getCategoryColor() + '20'"
      [style.color]="getCategoryColor()"
    >
      {{ getCategoryLabel() }}
    </span>

    @if (source().description) {
      <span class="text-xs text-gray-400">Â·</span>
      <span class="text-xs text-gray-500 truncate">{{ source().description }}</span>
    }
  </div>

  <!-- Row 4: Action buttons -->
  <div class="flex justify-end gap-2">
    <button
      class="text-xs text-gray-400 hover:text-teal-600 transition-colors px-2 py-1 rounded hover:bg-gray-50"
      (click)="edit.emit(source()); $event.stopPropagation()"
      [attr.aria-label]="'Edit ' + source().name"
    >
      âœï¸ Modifier
    </button>

    <button
      class="text-xs text-gray-400 hover:text-red-600 transition-colors px-2 py-1 rounded hover:bg-red-50"
      (click)="delete.emit(source()); $event.stopPropagation()"
      [attr.aria-label]="'Delete ' + source().name"
    >
      ğŸ—‘ï¸ Supprimer
    </button>
  </div>
</div>